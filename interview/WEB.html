<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>WEB | nuonuo Blog</title>
    <meta name="description" content="个人笔记库">
    
    
    <link rel="preload" href="/blog/assets/css/0.styles.4d701dfb.css" as="style"><link rel="preload" href="/blog/assets/js/app.607c1ba4.js" as="script"><link rel="preload" href="/blog/assets/js/11.1bda51a4.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.66ca43b4.js"><link rel="prefetch" href="/blog/assets/js/12.7e024983.js"><link rel="prefetch" href="/blog/assets/js/13.0fc94cd6.js"><link rel="prefetch" href="/blog/assets/js/14.68d7366c.js"><link rel="prefetch" href="/blog/assets/js/15.6e0a8222.js"><link rel="prefetch" href="/blog/assets/js/16.86171f67.js"><link rel="prefetch" href="/blog/assets/js/17.e8b36955.js"><link rel="prefetch" href="/blog/assets/js/18.151c5a75.js"><link rel="prefetch" href="/blog/assets/js/19.18e3fe39.js"><link rel="prefetch" href="/blog/assets/js/2.5ae90992.js"><link rel="prefetch" href="/blog/assets/js/20.6cc05ee2.js"><link rel="prefetch" href="/blog/assets/js/21.4301888d.js"><link rel="prefetch" href="/blog/assets/js/22.0c9b437e.js"><link rel="prefetch" href="/blog/assets/js/23.714c19d9.js"><link rel="prefetch" href="/blog/assets/js/24.c1c693f3.js"><link rel="prefetch" href="/blog/assets/js/25.91953ca4.js"><link rel="prefetch" href="/blog/assets/js/26.b27a21d1.js"><link rel="prefetch" href="/blog/assets/js/3.c5474b01.js"><link rel="prefetch" href="/blog/assets/js/4.44cc47d8.js"><link rel="prefetch" href="/blog/assets/js/5.aad341a0.js"><link rel="prefetch" href="/blog/assets/js/6.6282afad.js"><link rel="prefetch" href="/blog/assets/js/7.810257e9.js"><link rel="prefetch" href="/blog/assets/js/8.c5be16c8.js"><link rel="prefetch" href="/blog/assets/js/9.78694199.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.4d701dfb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">nuonuo Blog</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">首页</a></div><div class="nav-item"><a href="/blog/utils/" class="nav-link">方法库</a></div><div class="nav-item"><a href="/blog/property/" class="nav-link">性能优化</a></div><div class="nav-item"><a href="/blog/interview/" class="nav-link router-link-active">题目整理</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">首页</a></div><div class="nav-item"><a href="/blog/utils/" class="nav-link">方法库</a></div><div class="nav-item"><a href="/blog/property/" class="nav-link">性能优化</a></div><div class="nav-item"><a href="/blog/interview/" class="nav-link router-link-active">题目整理</a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>面试题整理</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/blog/interview/" class="sidebar-link">数据结构</a></li><li><a href="/blog/interview/WEB.html" class="active sidebar-link">WEB</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/interview/WEB.html#同源策略" class="sidebar-link">同源策略</a></li><li class="sidebar-sub-header"><a href="/blog/interview/WEB.html#跨域方法以及怎么样实现的与原理" class="sidebar-link">跨域方法以及怎么样实现的与原理</a></li><li class="sidebar-sub-header"><a href="/blog/interview/WEB.html#为什么浏览器会产生同源策略" class="sidebar-link">为什么浏览器会产生同源策略</a></li><li class="sidebar-sub-header"><a href="/blog/interview/WEB.html#从输入url到看到页面发生的全过程" class="sidebar-link">从输入URL到看到页面发生的全过程</a></li><li class="sidebar-sub-header"><a href="/blog/interview/WEB.html#http状态码" class="sidebar-link">http状态码</a></li><li class="sidebar-sub-header"><a href="/blog/interview/WEB.html#请求头属性request-headers" class="sidebar-link">请求头属性Request Headers</a></li><li class="sidebar-sub-header"><a href="/blog/interview/WEB.html#congtentype为application-json和application-x-www-form-urlencoded的区别" class="sidebar-link">congtenType为application/json和application/x-www-form-urlencoded的区别</a></li></ul></li><li><a href="/blog/interview/HTML.html" class="sidebar-link">HTML</a></li><li><a href="/blog/interview/CSS.html" class="sidebar-link">CSS</a></li><li><a href="/blog/interview/JS.html" class="sidebar-link">JS</a></li><li><a href="/blog/interview/Node.js.html" class="sidebar-link">Node.js</a></li><li><a href="/blog/interview/Frame.html" class="sidebar-link">框架</a></li><li><a href="/blog/interview/Authority.html" class="sidebar-link">权限控制</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="web"><a href="#web" aria-hidden="true" class="header-anchor">#</a> WEB</h1> <h2 id="同源策略"><a href="#同源策略" aria-hidden="true" class="header-anchor">#</a> 同源策略</h2> <p><strong>定义：三个相同：</strong></p> <ol><li>协议相同</li> <li>域名相同</li> <li>端口相同</li></ol> <p>例子：http://www.example.com/dir/page.html
这个网址，协议是http://，域名是www.example.com，端口是80（默认端口可以省略）。它的同源情况如下：
http://www.example.com/dir2/other.html：同源
http://example.com/dir/other.html：不同源（域名不同）
http://v2.www.example.com/dir/other.html：不同源（域名不同）
http://www.example.com:81/dir/other.html：不同源（端口不同）
<strong>非同源，共有三种行为受到限制：</strong></p> <ol><li>Cookie、LoCALStorage和indexDB无法读取。</li> <li>DOM无法获取</li> <li>Ajax请求不能发送。</li></ol> <h2 id="跨域方法以及怎么样实现的与原理"><a href="#跨域方法以及怎么样实现的与原理" aria-hidden="true" class="header-anchor">#</a> 跨域方法以及怎么样实现的与原理</h2> <h3 id="跨域方法："><a href="#跨域方法：" aria-hidden="true" class="header-anchor">#</a> 跨域方法：</h3> <ul><li>JSONP</li> <li>WebSocket</li> <li>CORS</li></ul> <h5 id="jsonp"><a href="#jsonp" aria-hidden="true" class="header-anchor">#</a> jsonp</h5> <p>JSONP是服务器与客户端跨源通信的常用方法。最大特点就是简单适用，老式浏览器全部支持，服务器改造非常小。
它的基本思想是，网页通过添加一个&lt;script&gt;元素，向服务器请求JSON数据，这种做法不受同源政策限制；服务器收到请求后，将数据放在一个指定名字的回调函数里传回来。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//首先，网页动态插入&lt;script&gt;元素，由它向跨源网址发出请求。</span>
<span class="token keyword">function</span> <span class="token function">addScriptTag</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    script<span class="token punctuation">.</span><span class="token function">Attribute</span><span class="token punctuation">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;text/javascript&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    script<span class="token punctuation">.</span>src<span class="token operator">=</span>src<span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
window<span class="token punctuation">.</span>onload<span class="token operator">=</span><span class="token function">funciton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token function">addScriptTag</span><span class="token punctuation">(</span><span class="token string">'http://example.com/ip?callback=foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Your public IP address is: '</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>ip<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//上面代码通过动态添加&lt;script&gt;元素，向服务器example.com发出请求。</span>
<span class="token comment">//注意，该请求的查询字符串有一个callback参数，用来指定回调函数的名字，</span>
<span class="token comment">//这对于JSONP是必需的。</span>
<span class="token comment">//服务器收到这个请求以后，会将数据放在回调函数的参数位置返回。</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token string">&quot;ip&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;8.8.8.8&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="websoket"><a href="#websoket" aria-hidden="true" class="header-anchor">#</a> WebSoket</h5> <p>WebSocket是一种通信协议，使用ws://（非加密）和wss://（加密）作为协议前缀。该协议不实行同源政策，只要服务器支持，就可以通过它进行跨源通信。</p> <h5 id="跨域资源共享-cors"><a href="#跨域资源共享-cors" aria-hidden="true" class="header-anchor">#</a> 跨域资源共享 CORS</h5> <p>它允许浏览器向跨源服务器，发出XMLHttpRequest请求，从而克服了AJAX只能同源使用的限制</p> <ol><li><p>Access-Control-Allow-Origin该字段是必须的。</p> <p>它的值要么是请求时Origin字段的值，要么是一个*，表示接受任意域名的请求。</p></li> <li><p>Access-Control-Allow-Credentials</p> <p>该字段可选。它的值是一个布尔值，表示是否允许发送Cookie。默认情况下，Cookie不包括在CORS请求之中。设为true，即表示服务器明确许可，Cookie可以包含在请求中，一起发给服务器。这个值也只能设为true，如果服务器不要浏览器发送Cookie，删除该字段即可。var xhr = new XMLHttpRequest();xhr.withCredentials = true</p></li> <li><p>Access-Control-Expose-Headers</p> <p>该字段可选。CORS请求时，XMLHttpRequest对象的getResponseHeader()方法只能拿到6个基本字段：Cache-Control、Content-Language、Content-Type、Expires、Last-Modified、Pragma。如果想拿到其他字段，就必须在Access-Control-Expose-Headers里面指定。上面的例子指定，getResponseHeader('FooBar')可以返回FooBar字段的值。</p> <p>需要注意的是，如果要发送Cookie，Access-Control-Allow-Origin就不能设为星号，必须指定明确的、与请求网页一致的域名。同时，Cookie依然遵循同源政策，只有用服务器域名设置的Cookie才会上传，其他域名的Cookie并不会上传，且（跨源）原网页代码中的document.cookie也无法读</p> <p><strong>JSONP只支持GET请求，CORS支持所有类型的HTTP请求。JSONP的优势在于支持老式浏览器，以及可以向不支持CORS的网站请求数据。</strong></p></li></ol> <h2 id="为什么浏览器会产生同源策略"><a href="#为什么浏览器会产生同源策略" aria-hidden="true" class="header-anchor">#</a> 为什么浏览器会产生同源策略</h2> <p>设置同源限制主要是为了安全，如果没有同源限制存在浏览器中的cookie等其他数据可以任意读取，不同域下DOM任意操作，ajax任意请求的话如果浏览了恶意网站那么就会泄漏这些隐私数据</p> <h2 id="从输入url到看到页面发生的全过程"><a href="#从输入url到看到页面发生的全过程" aria-hidden="true" class="header-anchor">#</a> 从输入URL到看到页面发生的全过程</h2> <ol><li>首先浏览器主进程接管，开了一个下载线程。</li> <li>然后进行HTTP请求（DNS查询、IP寻址等等），中间会有三次捂手，等待响应，开始下载响应 报文。</li> <li>将下载完的内容转交给Renderer进程管理。</li> <li>Renderer进程开始解析css rule tree和dom tree，这两个过程是并行的，所以一5般我会把link标签放在页面顶部。</li> <li>解析绘制过程中，当浏览器遇到link标签或者script、img等标签，浏览器会去下载6这些内容，   遇到时候缓存的使用缓存，不适用缓存的重新下载资源。</li> <li>css rule tree和dom tree生成完了之后，开始合成render tree，这个时候浏览器会进行layout，开始计算每一个节点的位置，然后进行绘制。</li> <li>绘制结束后，关闭TCP连接，过程有四次挥手。</li></ol> <h2 id="http状态码"><a href="#http状态码" aria-hidden="true" class="header-anchor">#</a> http状态码</h2> <ul><li>定义：HTTP状态码（HTTP Status Code）是用以表示网页服务器HTTP响应状态的3位数字代码。</li> <li>常用状态码
<ol><li>200——表明该请求被成功地完成，所请求的资源发送回客户端</li> <li>304——自从上次请求后，请求的网页未修改过，请客户端使用本地缓存</li> <li>400——客户端请求有错（譬如可以是安全模块拦截）</li> <li>401——请求未经授权</li> <li>403——禁止访问（譬如可以是未登录时禁止）</li> <li>404——资源未找到</li> <li>500——服务器内部错误</li> <li>503——服务不可用</li></ol></li> <li>状态码前序意义
<ol><li>1：消息，代表请求已被接受，需要继续处理。</li> <li>2：成功 代表请求已成功被服务器接收、理解、并接受</li> <li>3：重定向代表需要客户端采取进一步的操作才能完成请求。通常，这些状态码用来重定向，后续的请求地址（重定向目标）在本次响应的 Location 域中指明。</li> <li>4：请求错误代表了客户端看起来可能发生了错误，妨碍了服务器的处理</li> <li>5,6：服务器错误</li></ol></li></ul> <h2 id="请求头属性request-headers"><a href="#请求头属性request-headers" aria-hidden="true" class="header-anchor">#</a> 请求头属性Request Headers</h2> <p>① Accept:<code>text/html,application/xhtml+xml, application/xml;q=0.9,image/webp,</code><em>/</em><code>;q=0.8</code></p> <p>斜杠前面的是 type（类型），斜杠后面的是 subtype（子类型）。type 指定包含的时何种数据，subtype 标识数据的特定类型，即大类中的小类。例如，image/jpeg,类型是image，子类型是jpeg。</p> <p>已经定义了8个顶级类型：</p> <p>text/*：用于标准化地表示的文本信息，文本消息可以是多种字符集和或者多种格式的；</p> <p>image/*：表示图片；</p> <p>model/*：表示3D模型，如VRML文件；</p> <p>audio/*：表示声音；</p> <p>video/*：表示视频，可能包括声音；</p> <p>message/*：表示协议特定的信封，如email消息和HTTP响应；</p> <p>application/*：用于传输应用程序数据或者二进制数据；</p> <p>multipart/*：表示多个文档和资源的容器；</p> <p>② Accept-Encoding:gzip, deflate, sdch, br</p> <ul><li>指定浏览器可以支持的web服务器返回内容压缩编码类型。</li> <li>Accept-Encoding表示浏览器有能力解码的编码类型。</li></ul> <p>③ Accept-Language:zh-CN,zh;q=0.8</p> <ul><li>浏览器支持的语言分别是中文和简体中文，优先支持简体中文。</li></ul> <p>④ Cache-Control:max-age=0</p> <ul><li>指定请求和响应遵循的缓存机制</li> <li>max-age&gt;0 ：直接从流览器缓存中提取</li> <li>max-age&lt;=0 ：向server 发送http 请求确认</li></ul> <p>⑤ Connection:keep-alive</p> <ul><li>表示是否需要持久连接。（HTTP 1.1默认进行持久连接）</li></ul> <p>⑥ Cookie:JSESSIONID=37FDBFB5E02C9DF3F94BDCE1F75D5291</p> <ul><li>HTTP请求发送时，会把保存在该请求域名下的所有cookie值一起发送给web服务器。</li></ul> <p>⑦ Host:localhost:8080</p> <ul><li>指定请求的服务器的域名和端口号</li></ul> <p>⑧ Upgrade-Insecure-Requests:1</p> <ul><li>向服务器指定某种传输协议以便服务器进行转换（如果支持）</li></ul> <p>⑨ User-Agent:Mozilla/5.0 (Windows NT 10.0; WOW64)  AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.75 Safari/537.36</p> <p>User-Agent（用户代理），简称 UA，它是一个特殊字符串头，使得服务器能够识别客户端使用的操作系统及版本、CPU 类型、浏览器及版本、浏览器渲染引擎、浏览器语言、浏览器插件等。</p> <p>⑩ Authorization</p> <p>Authorization的作用是当客户端访问受口令保护时，服务器端会发送401状态码和WWW-Authenticate响应头，要求客户机使用Authorization来应答。</p> <p>还有很多</p> <h2 id="congtentype为application-json和application-x-www-form-urlencoded的区别"><a href="#congtentype为application-json和application-x-www-form-urlencoded的区别" aria-hidden="true" class="header-anchor">#</a> congtenType为application/json和application/x-www-form-urlencoded的区别</h2> <p>都是表单数据发送时的编码类型</p> <p>application/json内容传输类型是json格式的字符串</p> <p>application/x-www-form-urlencoded:浏览器用x-www-form-urlencoded的编码方式把form数据转换成一个字串（name1=value1&amp;name2=value2…），然后把这个字串append到url后面，用?分割，加载这个新的url。 当action为post时候，浏览器把form数据封装到http body中，然后发送到server。</p> <p>使用json格式，php头部需要加上如下代码，否则会报错</p> <div class="language-http extra-class"><pre class="language-http"><code>header('Access-Control-Allow-Headers:x-requested-with,content-type');
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blog/interview/" class="prev router-link-active">
          数据结构
        </a></span> <span class="next"><a href="/blog/interview/HTML.html">
          HTML
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/blog/assets/js/11.1bda51a4.js" defer></script><script src="/blog/assets/js/app.607c1ba4.js" defer></script>
  </body>
</html>
